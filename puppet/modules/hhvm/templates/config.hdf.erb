# This file is managed by puppet

PidFile = /var/run/hhvm/pid

Server {
  Type = fastcgi
  Port = 9000
  SourceRoot = <%= scope['role::mediawiki::dir'] %>
  GzipCompressionLevel = 0
  IncludeSearchPaths {
    * = /usr/share/php
  }
}

Eval {
  EnableZendCompat = true
  Jit = true
  JitAFrozenSize = 100000000
  PerfPidMap = false

  Debugger {
    EnableDebuggerServer = true
    Port = 8089
    DefaultSandboxPath = <%= scope['role::mediawiki::dir'] %>
    StartupDocument = <%= scope['role::mediawiki::dir'] %>/index.php
  }
}

Sandbox {
    SandboxMode = true
}

DynamicExtensionPath = /usr/lib/hphp/extensions/20131007

DynamicExtensions {
  * = luasandbox.so
  * = fss.so
  * = wikidiff2.so
}

Log {
  Level = Warning
  AlwaysLogUnhandledExceptions = true
  UseLogFile = true
  UseSyslog = false
  File = /var/log/hhvm/error.log
  Access {
    * {
      File = /var/log/hhvm/access.log
      Format = %h %l %u % t \”%r\” %>s %b
    }
  }
}

Repo {
  Central {
    Path = /var/run/hhvm/hhvm.hhbc
  }
}

MySQL {
  TypedResults = false
}
